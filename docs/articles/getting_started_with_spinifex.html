<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with spinifex • spinifex</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with spinifex">
<meta property="og:description" content="spinifex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spinifex</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started_with_spinifex.html">Getting started with spinifex</a>
    </li>
    <li>
      <a href="../articles/ggproto_api.html">ggproto API</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nspyrison/spinifex/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting started with spinifex</h1>
                        <h4 data-toc-skip class="author">Nicholas Spyrison</h4>
            
            <h4 data-toc-skip class="date">2022-02-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nspyrison/spinifex/blob/HEAD/vignettes/getting_started_with_spinifex.Rmd" class="external-link"><code>vignettes/getting_started_with_spinifex.Rmd</code></a></small>
      <div class="hidden name"><code>getting_started_with_spinifex.Rmd</code></div>

    </div>

    
    
<!-- #Example vignette: 
https://github.com/njtierney/naniar/blob/master/vignettes/getting-started-w-naniar.Rmd -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Numeric multivariate data is ubiquitous and viewing data within data-space (rather than summarized as parameters or statistics) is a critical part of exploratory data analysis and the data analysis workflow in general. Viewing multivariate quickly becomes complex. Linear projections of high dimensional spaces offer a scalable way to extend viewing these data-spaces as the dimension of the data increases. Traditionally, these are viewed as static orthogonal pairs. Alternatively, <em>tours</em>, are a class of linear projections that animate many frames over small changes in the projection basis.</p>
<p>The package <strong>spinifex</strong> allows the application of manual tours, where a selected variable is rotated fully into and out of the give projection basis. Its also facilitates a layered composition of tours interoperable with <strong>tourr</strong>. These composition can then be animated to interactive html widget with <strong>plotly</strong> or to .gif/.mp4 format with <strong>gganimate</strong>.</p>
<div class="section level3">
<h3 id="dynamic-projections-of-high-dimensional-data-tours">Dynamic projections of high dimensional data, tours<a class="anchor" aria-label="anchor" href="#dynamic-projections-of-high-dimensional-data-tours"></a>
</h3>
<p>Tours are a class of dynamic orthogonal (linear) projections that embed <span class="math inline">\(p-\)</span>dimensional space into a <span class="math inline">\(d-\)</span>dimensional subspace and animates many such projections over small changes to the projection basis (essesentially the orientation of the data). Tours are useful in identify clustering, outliers, and structure held within numeric multivariate data.</p>
<p>This concept is analogous to shadows. Suppose a bar stool is held in front of a light source. This is a linear projection of a 3D object casting a 2D shadow. Some projections may not convey much information (the seat may only cast a circular shadow). If we observe the shadow change over as the barstool is rotated, we quickly understand the shape of the object. The same is true for tours; watching the permanence of observations between frames conveys more information than unlinked orthogonal views.</p>
<p>We focus on the application of the <em>manual tours</em> in this document. In a manual tour, the contributions of one variable are manipulated to show the impact that it has on the structure of the projection. Controlling the coefficients of a single variable can be insightful after finding a projection of interest, perhaps with the use of a <em>guided tour</em>. A wider application of tours can be accomplished with with the package <code>tourr</code>, <a href="https://CRAN.R-project.org/package=tourr" class="external-link">CRAN.R-project.org/package=tourr</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>In the below examples we go through some use cases for manual tours. To get started we’ll load a couple packages we use.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/ggobi/tourr" class="external-link">"tourr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/nspyrison/spinifex/" class="external-link">"spinifex"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="example-1---radial-tour">Example 1 - Radial tour<a class="anchor" aria-label="anchor" href="#example-1---radial-tour"></a>
</h3>
<p>For this example, we’ll be using the penguins data set. It consists of 333 observations of penguins near Palmer Station, Antarctica across 3 different species.</p>
<p>The following example will explore how changing the contributions of the variable, <code>bill_length_mm</code>, will affect the structure of the projection. We’ll initialize a random basis and then view the manipulation space.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scale_sd.html">scale_sd</a></span><span class="op">(</span><span class="va">penguins_na.rm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dat_std</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bl"</span>, <span class="st">"bd"</span>, <span class="st">"fl"</span>, <span class="st">"bm"</span><span class="op">)</span>
<span class="va">bas_pca</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basis_pca.html">basis_pca</a></span><span class="op">(</span><span class="va">dat_std</span><span class="op">)</span>
<span class="va">clas</span>    <span class="op">&lt;-</span> <span class="va">penguins_na.rm</span><span class="op">$</span><span class="va">species</span>

<span class="fu"><a href="../reference/ggtour.html">ggtour</a></span><span class="op">(</span>basis_array <span class="op">=</span> <span class="va">bas_pca</span>, data <span class="op">=</span> <span class="va">dat_std</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/proto_basis.html">proto_basis</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="getting_started_with_spinifex_files/figure-html/view-basis-1.png" width="576" style="display: block; margin: auto;"></p>
<p>We started from a random basis, that explains the orthogonal projection from <span class="math inline">\(p\)</span> to <span class="math inline">\(d\)</span> space. Use <code>proto_basis</code> to see the <em>reference axes</em>, a visual depiction of how the variables contributed to the xy directions of the 2D projection.</p>
<p>We want to explore how the coefficients of <code>aede2</code> contribute to the structure in this projection, so we set the manipulation variable to its column number, 3. To change the contributions without breaking the orthogonality of the other variables, we need to add a dimension. We call this new space the manipulation space, which can be viewed with the function <code><a href="../reference/view_manip_space.html">view_manip_space()</a></code>. Note that the projection plane containing the reference frame is laid down on the surface, while the manipulation dimension is at a right angle out-of-plane, with a full contribution on the manip var.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/view_manip_space.html">view_manip_space</a></span><span class="op">(</span>basis <span class="op">=</span> <span class="va">bas_pca</span>, manip_var <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> </code></pre></div>
<p><img src="getting_started_with_spinifex_files/figure-html/view-manip-space-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Now we have the freedom to change the contributions of <code>bill_length_mm</code>, we do so by controlling the values of the in-plane angle, <span class="math inline">\(\theta\)</span>, and the out of plane angle, <span class="math inline">\(\phi\)</span>. in this example we’ll perform a radial manual tour, holding <span class="math inline">\(\theta\)</span> constant while we vary the values of <span class="math inline">\(\phi\)</span> to remove and maximize the contribution of the manipulation variable.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Save a tour path</span>
<span class="va">mt_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/manual_tour.html">manual_tour</a></span><span class="op">(</span>basis <span class="op">=</span> <span class="va">bas_pca</span>, manip_var <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="co">## Compose the display</span>
<span class="va">my_ggtour</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggtour.html">ggtour</a></span><span class="op">(</span>basis_array <span class="op">=</span> <span class="va">mt_path</span>, data <span class="op">=</span> <span class="va">dat_std</span>, angle <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="co">## Angle is the distance between (geodesically) interpolated frames</span>
  <span class="fu"><a href="../reference/proto_default.html">proto_default</a></span><span class="op">(</span>aes_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">clas</span>, shape <span class="op">=</span> <span class="va">clas</span><span class="op">)</span><span class="op">)</span>

<span class="co">## Animate</span>
<span class="fu"><a href="../reference/animate_gganimate.html">animate_gganimate</a></span><span class="op">(</span>ggtour <span class="op">=</span> <span class="va">my_ggtour</span>, fps <span class="op">=</span> <span class="fl">6</span>,
                  height <span class="op">=</span> <span class="fl">3</span>, width <span class="op">=</span> <span class="fl">4.5</span>, units <span class="op">=</span> <span class="st">"in"</span>, res <span class="op">=</span> <span class="fl">150</span><span class="op">)</span>
<span class="co">## Or as a plotly html widget</span>
<span class="co">#animate_plotly(ggt, fps = 6)</span></code></pre></div>
<p><img src="mt_penguins.gif" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="example-2---glyph-map">Example 2 - Glyph map<a class="anchor" aria-label="anchor" href="#example-2---glyph-map"></a>
</h3>
<p>Another of the <em>manual tour</em> is the creation a <em>glyph-maps</em>, where time series can be shown side-by-side, like faceting (offsetting) on their lat/long physical positions. We’ll use the following <code>GGally</code> glyph-map as an example</p>
<p><img src="getting_started_with_spinifex_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;"></p>
<p>We’ll perform a horizontal rotation and followed by the vertical rotation before bringing them together. we apply the horizontal rotation (<span class="math inline">\(\theta\)</span><code>= 0</code>) on the <code>day</code> values (<code>manip_var = 3</code>). Pre-multiply the data with the rotation matrix to project the data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Initialize</span>
<span class="va">nasa_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>
  <span class="fu">GGally</span><span class="fu">::</span><span class="va"><a href="https://ggobi.github.io/ggally/reference/nasa.html" class="external-link">nasa</a></span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span>,
  <span class="fu"><a href="../reference/scale_sd.html">scale_sd</a></span><span class="op">(</span><span class="fu">GGally</span><span class="fu">::</span><span class="va"><a href="https://ggobi.github.io/ggally/reference/nasa.html" class="external-link">nasa</a></span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"day"</span>, <span class="st">"surftemp"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">bas</span> <span class="op">&lt;-</span> <span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/basis_init.html" class="external-link">basis_init</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">nasa_std</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>

<span class="co">## Horizontal rotation</span>
<span class="va">m_sp_x</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_manip_space.html">create_manip_space</a></span><span class="op">(</span>basis <span class="op">=</span> <span class="va">bas</span>, manip_var <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">rot_mat_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rotate_manip_space.html">rotate_manip_space</a></span><span class="op">(</span>manip_space <span class="op">=</span> <span class="va">m_sp_x</span>,
                                theta <span class="op">=</span> <span class="fl">0</span>, phi <span class="op">=</span> <span class="va">pi</span> <span class="op">/</span> <span class="fl">6</span><span class="op">)</span>
<span class="va">rot_x</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">nasa_std</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">rot_mat_x</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rot_x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x_manip_sp"</span><span class="op">)</span></code></pre></div>
<p>Likewise, we’ll perform a vertical rotation (<span class="math inline">\(\theta\)</span><code>= pi/2</code>) on surface temperature (manip_var = 4). Combine the rotations and plot just the rotated values without lat/long or x/y markers, neat!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Vertical rotation</span>
<span class="va">m_sp_y</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_manip_space.html">create_manip_space</a></span><span class="op">(</span>basis <span class="op">=</span> <span class="va">bas</span>, manip_var <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="va">rot_mat_y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rotate_manip_space.html">rotate_manip_space</a></span><span class="op">(</span>manip_space <span class="op">=</span> <span class="va">m_sp_y</span>, 
                                theta <span class="op">=</span> <span class="va">pi</span> <span class="op">/</span> <span class="fl">2</span>, phi <span class="op">=</span> <span class="va">pi</span> <span class="op">/</span> <span class="fl">6</span><span class="op">)</span>
<span class="va">rot_y</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">nasa_std</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">rot_mat_y</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rot_y</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y_manip_sp"</span><span class="op">)</span>

<span class="co">## Combine rotations</span>
<span class="va">rot_xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">rot_x</span>, <span class="va">rot_y</span>, .name_repair <span class="op">=</span> <span class="st">"unique"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x1</span>, y <span class="op">=</span> <span class="va">y2</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">rot_xy</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
<p><img src="getting_started_with_spinifex_files/figure-html/Vertical-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="example-3---guided-tour">Example 3 - Guided tour<a class="anchor" aria-label="anchor" href="#example-3---guided-tour"></a>
</h3>
<p>Radial tours are often employed after an interesting feature has been identified. How the contributions of each variable impact the structure of resulting PCA, for example, might be interesting to explore. Alternatively, we can perform projection pursuit to maximize an objective function within the projection and performing a hill-climbing algorithm and explore what effect the contributions of the variables have there. Let’s do just that, optimizing a Holes indexed guided tour using the package <code>tourr</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Transform data</span>
<span class="va">dat_std</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scale_sd.html">scale_sd</a></span><span class="op">(</span><span class="va">penguins_na.rm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>
<span class="co">## Save holes indexed guided tour</span>
<span class="va">holes_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/save_history.html">save_history</a></span><span class="op">(</span><span class="va">dat_std</span>, <span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/guided_tour.html" class="external-link">guided_tour</a></span><span class="op">(</span><span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/holes.html" class="external-link">holes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co">## Compose display</span>
<span class="va">ggt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggtour.html">ggtour</a></span><span class="op">(</span><span class="va">holes_path</span>, <span class="va">dat_std</span>, angle <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/proto_default.html">proto_default</a></span><span class="op">(</span>aes_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">clas</span>, shape <span class="op">=</span> <span class="va">clas</span><span class="op">)</span><span class="op">)</span>

<span class="co">## Animate</span>
<span class="fu"><a href="../reference/animate_gganimate.html">animate_gganimate</a></span><span class="op">(</span><span class="va">ggt</span>, height <span class="op">=</span> <span class="fl">3</span>, width <span class="op">=</span> <span class="fl">4.5</span>, units <span class="op">=</span> <span class="st">"in"</span>, res <span class="op">=</span> <span class="fl">150</span><span class="op">)</span>
<span class="co">## Or as a plotly html widget</span>
<span class="co">#animate_plotly(ggt)</span></code></pre></div>
<p><img src="gt_penguins.gif" width="100%" style="display: block; margin: auto;"></p>
<p>This shows the optimization path of the holes index. We’ll grab the reference axes from the last frame and used that a starting orientation for a manual tour.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Save only the final holes frame</span>
<span class="va">holes_bas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basis_guided.html">basis_guided</a></span><span class="op">(</span><span class="va">dat_std</span>, index_f <span class="op">=</span> <span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/holes.html" class="external-link">holes</a></span><span class="op">(</span><span class="op">)</span>, d <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="co">## Print a single frame composition, a ggplot</span>
<span class="fu"><a href="../reference/ggtour.html">ggtour</a></span><span class="op">(</span><span class="va">holes_bas</span>, <span class="va">dat_std</span>, angle <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/proto_default.html">proto_default</a></span><span class="op">(</span>aes_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">clas</span>, shape <span class="op">=</span> <span class="va">clas</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="getting_started_with_spinifex_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<p>We’ll select <code>aede2</code> as the manip_var, as it is mostly orthogonal to four of the other variables and often has a larger contribution than <code>tars1</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Alternatively, ask for the variable by rank of the magnitude contributed:</span>
<span class="op">(</span><span class="va">mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/manip_var_of.html">manip_var_of</a></span><span class="op">(</span><span class="va">holes_bas</span>, rank <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="co">## A radial, manual tour from the resulting holes basis</span>
<span class="va">mt_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/manual_tour.html">manual_tour</a></span><span class="op">(</span><span class="va">holes_bas</span>, <span class="va">mv</span><span class="op">)</span>
<span class="co">## Compose tour</span>
<span class="va">ggt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggtour.html">ggtour</a></span><span class="op">(</span><span class="va">mt_path</span>, <span class="va">dat_std</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/proto_point.html">proto_point</a></span><span class="op">(</span>aes_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">clas</span>, shape <span class="op">=</span> <span class="va">clas</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/proto_basis.html">proto_basis</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/proto_origin.html">proto_origin</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## Animate</span>
<span class="fu"><a href="../reference/animate_gganimate.html">animate_gganimate</a></span><span class="op">(</span><span class="va">ggt</span>, height <span class="op">=</span> <span class="fl">3</span>, width <span class="op">=</span> <span class="fl">4.5</span>, units <span class="op">=</span> <span class="st">"in"</span>, res <span class="op">=</span> <span class="fl">150</span><span class="op">)</span>
<span class="co">## Or as a plotly html widget</span>
<span class="co">#animate_plotly(ggt)</span></code></pre></div>
<p><img src="holes_penguins.gif" width="100%" style="display: block; margin: auto;"></p>
<p>We can see that <code>aede2</code> is important in distinguishing between the purple cluster and the green cluster. However, even when its contribution is zeros the contribution of <code>tars1</code> is enough to keep the cluster from overlapping.</p>
</div>
</div>
<div class="section level2">
<h2 id="namesake">Namesake<a class="anchor" aria-label="anchor" href="#namesake"></a>
</h2>
<p>The name ‘spinifex’ comes from the <a href="https://en.wikipedia.org/wiki/Spinifex_hopping_mouse" class="external-link">spinifex hopping mouse (wiki)</a>, a nocturnal dessert mouse common to arid zones in central and western Australia. As to its relation to this work, in the words of Di Cook “It spins, it hops and needs a mouse.”</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicholas Spyrison, Dianne Cook.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
